/*! Built with http://stenciljs.com */
const{h:t}=window.insites;class e{constructor(){this.dateOpt=["Today","This Week","Last Week","This Month","Last Month","This Year","Last Year","Custom"]}dateOptEHandler(t){document.getElementsByClassName("date-filter__option")[0].textContent=t;let e=new Date,a=new Date,r=new Date;if("this week"==t.toLowerCase()){let t=r.getDate()-(r.getDay()-1),i=t+6;e=new Date(r.setDate(t)),a=new Date(r.setDate(i))}else if("last week"==t.toLowerCase()){let t=new Date((new Date).getTime()-6048e5),r=new Date(t),i=t.getDay(),s=t.getDate()-i+(0===i?-6:1);e=new Date(t.setDate(s)),a=new Date(r.setDate(s+6))}else"this month"==t.toLowerCase()?(e=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0)):"last month"==t.toLowerCase()?(e.setDate(1),e.setMonth(e.getMonth()-1),a=new Date(e.getFullYear(),e.getMonth()+1,0)):"this year"==t.toLowerCase()?(e=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),11,31)):"last year"==t.toLowerCase()?(e=new Date(e.getFullYear()-1,0,1),a=new Date(e.getFullYear(),11,31)):"custom"==t.toLowerCase()&&(e=this.stateDateFrom,a=this.stateDateTo);$(".date-range__from").datepicker("option","maxDate",null),$(".date-range__to").datepicker("option","minDate",null),$(".date-range__from").datepicker("setDate",e).trigger("change"),$(".date-range__to").datepicker("setDate",a).trigger("change")}getDate(){let t=$(".date-range__from").datepicker("getDate"),e=$(".date-range__to").datepicker("getDate");return{from:$.datepicker.formatDate("yy-mm-dd",t),to:$.datepicker.formatDate("yy-mm-dd",e)}}closeDateFilter(){this.dateFilterState=!1}toggleDateFilter(){this.dateFilterState=!this.dateFilterState,this.insFilter=document.getElementsByTagName("ins-filter-item"),[...this.insFilter].forEach(t=>{t.closeFilter()})}toggleApply(){let t=$(".date-range__from").datepicker("getDate"),e=$(".date-range__to").datepicker("getDate");this.stateFrom=$.datepicker.formatDate("yy-mm-dd",t),this.stateTo=$.datepicker.formatDate("yy-mm-dd",e),this.onDateFilterApply.emit({from:this.stateFrom,to:this.stateTo}),this.currentFilter=document.getElementsByClassName("date-filter__option")[0].textContent,this.toggleDateFilter()}toggleCancel(){this.toggleDateFilter(),document.getElementsByClassName("date-filter__option")[0].textContent=this.currentFilter,this.dateOptEHandler(this.currentFilter)}componentDidLoad(){let t,e,a="mm/dd/yy",r=$(".date-range__from").datepicker({numberOfMonths:1,firstDay:1,beforeShowDay:function(a){return t=$(".date-range__from").datepicker("getDate"),e=$(".date-range__to").datepicker("getDate"),a>=t&&a<=e?[!0,"ui-state-range-selected",""]:[!0,"",""]}}).on("change",function(){i.datepicker("option","minDate",n(this)),s($(this),".ins-date-from")}),i=$(".date-range__to").datepicker({numberOfMonths:1,firstDay:1,beforeShowDay:function(a){return t=$(".date-range__from").datepicker("getDate"),e=$(".date-range__to").datepicker("getDate"),a>=t&&a<=e?[!0,"ui-state-range-selected",""]:[!0,"",""]}}).on("change",function(){r.datepicker("option","maxDate",n(this)),s($(this),".ins-date-to")});function s(t,e){let a=t.datepicker("getDate"),r=$.datepicker.formatDate("yy-mm-dd",a);$(e).val(r)}function n(t){let e;try{e=$.datepicker.parseDate(a,t.value)}catch(t){e=null}return e}this.withDateFilter&&(this.setDefaultDate(),this.dateOptEHandler(this.currentFilter)),this.closeDateFilterMenu()}closeDateFilterMenu(){const t=this;$(window).on("click",function(e){$(e.target).closest(".ui-datepicker-header").length||$(e.target).closest(".filter__date").length||t.closeDateFilter()})}setDefaultDate(){if(this.currentFilter=this.dateOpt[0],this.defaultDate){let t=$.map(this.dateOpt,function(t){return t.toLowerCase()}),e=$.inArray(this.defaultDate.toLowerCase(),t);e>=0&&(this.currentFilter=this.dateOpt[e])}if(this.dateFrom&&this.dateTo){let t=new Date(this.dateFrom),e=new Date(this.dateTo);e>t&&(this.stateDateFrom=t,this.stateDateTo=e,this.currentFilter="Custom")}}updateDatepicker(t,e){let a=new Date(t.target.value),r=this.el.querySelector("."+e);$(r).datepicker("setDate",a).trigger("change")}render(){return t("div",{class:"filter"},t("span",{class:"filter__label"},"Filter:"),t("div",{class:"filter__btn-container"},t("slot",null),this.withDateFilter?t("div",{class:"filter__date"},t("div",{class:"date-filter",onClick:()=>this.toggleDateFilter()},t("span",{class:"date-filter__text"},this.dateTitle?this.dateTitle+":":"Date Period:"," "),t("span",{class:"date-filter__option"},this.dateOpt[0]),t("i",{class:"fas icon-keyboard-arrow-down"})),t("div",{class:this.dateFilterState?"date-range active":"date-range"},t("div",{class:"date-range__opt-container"},this.dateOpt.map(e=>t("div",{onClick:()=>this.dateOptEHandler(e)},t("div",null,e)))),t("div",{class:"date-range__picker"},t("div",{class:"date-range__from"}),t("div",{class:"date-range__to"})),t("div",{class:"date-range__action"},t("input",{type:"date",required:!0,class:"ins-date-from",onChange:t=>this.updateDatepicker(t,"date-range__from")}),"  -  ",t("input",{type:"date",required:!0,class:"ins-date-to",onChange:t=>this.updateDatepicker(t,"date-range__to")}),t("div",{class:"date-range__cancel-apply"},t("div",{class:"date-range__cancel",onClick:()=>this.toggleCancel()},"CANCEL"),t("div",{class:"date-range__apply",onClick:()=>this.toggleApply()},"APPLY"))))):""))}static get is(){return"ins-filter"}static get properties(){return{closeDateFilter:{method:!0},currentFilter:{state:!0},dateFilterState:{state:!0},dateFrom:{type:String,attr:"date-from"},dateOpt:{type:"Any",attr:"date-opt"},dateTitle:{type:"Any",attr:"date-title"},dateTo:{type:String,attr:"date-to"},defaultDate:{type:String,attr:"default-date"},el:{elementRef:!0},getDate:{method:!0},insFilter:{state:!0},stateDateFrom:{state:!0},stateDateTo:{state:!0},stateFrom:{state:!0},stateTo:{state:!0},withDateFilter:{type:Boolean,attr:"with-date-filter"}}}static get events(){return[{name:"onDateFilterApply",method:"onDateFilterApply",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"ins-filter .filter{font-size:12px}ins-filter .filter__label{margin-right:18px}ins-filter .filter__date{display:inline-block;margin-right:15px}ins-filter .filter__btn-container{display:inline-block;position:relative}ins-filter .date-filter{border-radius:4px;background-color:#e4e6ec;display:inline-block;padding:7px 7px;color:#2c3148;cursor:pointer}ins-filter .date-filter__text{font-weight:600}ins-filter .date-filter .fas{margin-left:8px;color:#8c94a4;font-size:6px}ins-filter .date-range{background-color:#fff;font-size:14px;-webkit-box-shadow:0 2px 4px 0 rgba(15,21,38,.14),1px 1px 3px 0 rgba(140,148,164,.2);box-shadow:0 2px 4px 0 rgba(15,21,38,.14),1px 1px 3px 0 rgba(140,148,164,.2);border-radius:4px;display:none;position:absolute;min-width:575px;padding:20px;z-index:2;height:440px}ins-filter .date-range.active{display:block;top:40px;left:-20px}ins-filter .date-range__opt-container>div{display:inline-block;width:20%;font-size:12px;color:#8c94a4;cursor:pointer;margin:6px 0}ins-filter .date-range__opt-container>div>div{display:inline-block;padding:5px;border-radius:4px}ins-filter .date-range__opt-container>div>div:hover{background-color:#e4e6ec;color:#2c3148;font-weight:600}ins-filter .date-range__picker{background-color:#fafbfc;margin:15px 0;padding:10px 0;text-align:center}ins-filter .date-range__from,ins-filter .date-range__to{display:inline-block;margin:0}ins-filter .date-range__from .ui-widget.ui-widget-content,ins-filter .date-range__to .ui-widget.ui-widget-content{border:none;background:0 0;font-family:\"Open Sans\",sans-serif}ins-filter .date-range__from .ui-state-default,ins-filter .date-range__to .ui-state-default{border:none;background:0 0;font-size:11px;color:#8c94a4;padding-top:5px;padding-bottom:5px;text-align:center}ins-filter .date-range__from .ui-datepicker th,ins-filter .date-range__to .ui-datepicker th{font-weight:400;font-size:11px;border-bottom:solid 1px #e9e9e9;color:#8c94a4}ins-filter .date-range__from .ui-datepicker tbody,ins-filter .date-range__from .ui-datepicker thead,ins-filter .date-range__from .ui-datepicker tr,ins-filter .date-range__to .ui-datepicker tbody,ins-filter .date-range__to .ui-datepicker thead,ins-filter .date-range__to .ui-datepicker tr{background:0 0;border:none}ins-filter .date-range__from .ui-datepicker .ui-datepicker-title,ins-filter .date-range__to .ui-datepicker .ui-datepicker-title{font-weight:400;color:#505568}ins-filter .date-range__from .ui-datepicker .ui-datepicker-header,ins-filter .date-range__to .ui-datepicker .ui-datepicker-header{border:0;background:0 0}ins-filter .date-range__from .ui-datepicker .ui-datepicker-next,ins-filter .date-range__from .ui-datepicker .ui-datepicker-prev,ins-filter .date-range__to .ui-datepicker .ui-datepicker-next,ins-filter .date-range__to .ui-datepicker .ui-datepicker-prev{opacity:.5;-webkit-transform:scale(.4,.4);transform:scale(.4,.4)}ins-filter .date-range__from .ui-datepicker .ui-datepicker-next-hover,ins-filter .date-range__from .ui-datepicker .ui-datepicker-prev-hover,ins-filter .date-range__to .ui-datepicker .ui-datepicker-next-hover,ins-filter .date-range__to .ui-datepicker .ui-datepicker-prev-hover{background:0 0!important;border:none!important;top:2px}ins-filter .date-range__from .ui-datepicker .ui-datepicker-next span,ins-filter .date-range__from .ui-datepicker .ui-datepicker-prev span,ins-filter .date-range__to .ui-datepicker .ui-datepicker-next span,ins-filter .date-range__to .ui-datepicker .ui-datepicker-prev span{background:0 0!important}ins-filter .date-range__from .ui-datepicker .ui-datepicker-prev-hover,ins-filter .date-range__to .ui-datepicker .ui-datepicker-prev-hover{left:2px}ins-filter .date-range__from .ui-datepicker .ui-datepicker-prev span,ins-filter .date-range__to .ui-datepicker .ui-datepicker-prev span{border-left:solid 5px #333;border-top:solid 5px #333;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);cursor:pointer}ins-filter .date-range__from .ui-datepicker .ui-datepicker-next-hover,ins-filter .date-range__to .ui-datepicker .ui-datepicker-next-hover{right:2px}ins-filter .date-range__from .ui-datepicker .ui-datepicker-next span,ins-filter .date-range__to .ui-datepicker .ui-datepicker-next span{border-right:solid 5px #333;border-top:solid 5px #333;-webkit-transform:rotate(45deg);transform:rotate(45deg);cursor:pointer}ins-filter .date-range__from .ui-datepicker .ui-state-disabled.ui-datepicker-next span,ins-filter .date-range__from .ui-datepicker .ui-state-disabled.ui-datepicker-prev span,ins-filter .date-range__to .ui-datepicker .ui-state-disabled.ui-datepicker-next span,ins-filter .date-range__to .ui-datepicker .ui-state-disabled.ui-datepicker-prev span{opacity:.3!important}ins-filter .date-range__from .ui-state-active,ins-filter .date-range__from .ui-widget-content .ui-state-active,ins-filter .date-range__to .ui-state-active,ins-filter .date-range__to .ui-widget-content .ui-state-active{border:1px solid #1f86e3;background:#1f86e3;color:#fff}ins-filter .date-range__from .ui-state-range-selected,ins-filter .date-range__to .ui-state-range-selected{background:#e3eef9}ins-filter .date-range__from{margin-right:20px}ins-filter .date-range input::-webkit-calendar-picker-indicator{display:none}ins-filter .date-range__action{position:absolute;bottom:20px;color:#8c94a4;width:535px}ins-filter .date-range__action input[type=date],ins-filter .date-range__action input[type=text]{font-size:13px;font-family:\"Open Sans\",sans-serif;padding:5px 10px;width:115px;text-align:center;border-radius:4px;border:solid 1px #e4e6ec;color:#8c94a4;display:inline-block;background-color:#fff;-webkit-box-shadow:none;box-shadow:none;margin:0;height:unset}ins-filter .date-range__action input[type=date]::-webkit-calendar-picker-indicator,ins-filter .date-range__action input[type=date]::-webkit-inner-spin-button,ins-filter .date-range__action input[type=text]::-webkit-calendar-picker-indicator,ins-filter .date-range__action input[type=text]::-webkit-inner-spin-button{display:none;-webkit-appearance:none}ins-filter .date-range__cancel-apply{float:right}ins-filter .date-range__cancel-apply>div{display:inline-block;font-size:11px;padding:5px 10px;border-radius:4px;cursor:pointer}ins-filter .date-range__cancel{color:#1f86e3}ins-filter .date-range__apply{margin-left:30px;background:#1f86e3;color:#fff}ins-filter .date-range input[type=date]::-webkit-input-placeholder{visibility:hidden!important}ins-filter .date-range i.fas{position:absolute}"}}export{e as InsFilter};